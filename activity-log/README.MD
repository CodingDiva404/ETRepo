# Activity Log Analyzer (Node.js)

A beginner-friendly Node.js application that allows users to upload a `.txt` file containing activity logs and returns statistics about different activity types.  
The server also tracks how many files have been uploaded since it started.

---

## ðŸš€ Features

- Upload `.txt` files via API
- Read and analyze activity log files
- Count occurrences of each activity
- Track total number of uploaded files (in-memory)
- Return results as JSON

---

## ðŸ›  Tech Stack

- **Node.js**
- **Express.js** â€“ server and routing
- **Multer** â€“ file upload handling
- **fs** â€“ file system module
- **path** â€“ file path utilities

---

## ðŸ“ Project Structure

activity-log-server/
â”œâ”€â”€ uploads/
â”œâ”€â”€ server.js
â”œâ”€â”€ package.json

yaml
Copy code

---

## ðŸ“Œ server.js â€“ Detailed Explanation

---

### 1ï¸âƒ£ Import required modules

```js
const express = require("express");
const multer = require("multer");
const fs = require("fs");
const path = require("path");
```

express â†’ creates the server
multer â†’ handles file uploads
fs â†’ reads files from disk
path â†’ helps validate file extensions

2ï¸âƒ£ Initialize Express server
js
Copy code
const app = express();
const PORT = 3000;
app represents the server

Server listens on port 3000

3ï¸âƒ£ Track total uploaded files
js
Copy code
let totalFilesUploaded = 0;
Stored in memory

Resets when server restarts

4ï¸âƒ£ Configure Multer storage
js
Copy code
const storage = multer.diskStorage({
  destination: function (req, file, cb) {
    cb(null, "uploads/");
  },
  filename: function (req, file, cb) {
    cb(null, Date.now() + "-" + file.originalname);
  }
});
Files are stored in the uploads folder

Timestamp avoids filename conflicts

5ï¸âƒ£ Allow only .txt files
js
Copy code
const upload = multer({
  storage,
  fileFilter: (req, file, cb) => {
    if (path.extname(file.originalname) === ".txt") {
      cb(null, true);
    } else {
      cb(new Error("Only .txt files are allowed"));
    }
  }
});
Validates file extension

Rejects non-text files

6ï¸âƒ£ Test route
js
Copy code
app.get("/", (req, res) => {
  res.send("Server is running ðŸš€");
});
Used to verify the server is running

7ï¸âƒ£ Upload and analyze file route
js
Copy code
app.post("/upload", upload.single("logFile"), (req, res) => {
POST /upload handles file uploads

logFile must match the form-data key

8ï¸âƒ£ Validate uploaded file
js
Copy code
if (!req.file) {
  return res.status(400).json({ error: "File not received by server" });
}
Prevents crashes if no file is uploaded

9ï¸âƒ£ Read file content
js
Copy code
const filePath = req.file.path;
const fileData = fs.readFileSync(filePath, "utf-8");
Reads the uploaded .txt file as text

ðŸ”Ÿ Process activity logs
js
Copy code
const lines = fileData
  .split("\n")
  .map(line => line.trim())
  .filter(line => line !== "");
Splits file into lines

Removes extra spaces and empty lines

1ï¸âƒ£1ï¸âƒ£ Count activity occurrences
js
Copy code
const activityStats = {};

lines.forEach(activity => {
  const key = activity.toUpperCase();
  activityStats[key] = (activityStats[key] || 0) + 1;
});
Uses an object to count frequencies

Case-insensitive counting

1ï¸âƒ£2ï¸âƒ£ Increment upload counter
js
Copy code
totalFilesUploaded++;
1ï¸âƒ£3ï¸âƒ£ Send API response
js
Copy code
res.json({
  activityStats,
  totalFilesUploaded
});
Returns activity statistics and upload count

1ï¸âƒ£4ï¸âƒ£ Start the server
js
Copy code
app.listen(PORT, () => {
  console.log(`Server running on http://localhost:${PORT}`);
});
ðŸ“¤ Sample API Response
json
Copy code
{
  "activityStats": {
    "[LOGIN] USER LOGGED IN": 2,
    "[CLICK] BUTTON CLICKED": 1,
    "[LOGOUT] USER LOGGED OUT": 1
  },
  "totalFilesUploaded": 1
}
